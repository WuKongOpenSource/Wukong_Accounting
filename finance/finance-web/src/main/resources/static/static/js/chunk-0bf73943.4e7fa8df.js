(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bf73943"],{1603:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-popover",{attrs:{placement:"bottom-start","popper-class":"no-padding-popover",width:"400"},on:{show:e.handleShowPopover,hide:e.handleClosePopover},model:{value:e.popoverVisible,callback:function(t){e.popoverVisible=t},expression:"popoverVisible"}},[i("el-input",{class:["scene-select",{"is-show":e.popoverVisible}],staticStyle:{"margin-left":"10px"},style:{width:e.timeInputWidth},attrs:{slot:"reference",readonly:!0,value:e.searchTime},slot:"reference"},[i("i",{class:["el-input__icon","el-icon-"+e.iconClass],attrs:{slot:"suffix"},slot:"suffix"})]),e._v(" "),i("div",{staticClass:"form"},[e._t("default")],2)],1)},a=[],r=(i("d3b7"),i("159b"),i("b64b"),{name:"SearchPopoverWrapper",data:function(){return{popoverVisible:!1,searchTime:"",timeInputWidth:"180px"}},computed:{iconClass:function(){return this.popoverVisible?"arrow-up":"arrow-down"}},watch:{searchTime:function(e){this.$emit("update:searchTime",e)}},methods:{handleShowPopover:function(){this.popoverVisible||(this.popoverVisible=!0,window.addEventListener("click",this.handleCloseOutsidePopover))},handleClosePopover:function(){this.popoverVisible&&(this.popoverVisible=!1,window.removeEventListener("click",this.handleCloseOutsidePopover))},handleCloseOutsidePopover:function(e){var t=this.$refs.popover.$el;t.contains(e.target)||this.handleClosePopover()},updateData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(t).forEach((function(i){e[i]=t[i]}))}}}),o=r,c=(i("f0d7"),i("2877")),s=Object(c["a"])(o,n,a,!1,null,"432bfe70",null);t["a"]=s.exports},"1df0":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("flexbox",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"main",attrs:{gutter:0,align:"flex-start",justify:"flex-start",direction:"column"}},[i("flexbox",{staticClass:"main-header",attrs:{justify:"space-between"}},[i("span",{staticClass:"main-title"},[e._v("\n        查凭证\n        "),i("i",{staticClass:"wk wk-icon-fill-help wk-help-tips",attrs:{"data-type":"37","data-id":"305"}})]),e._v(" "),i("div",{staticClass:"buttons"},[e.$auth("finance.subject.save")?i("el-button",{attrs:{type:"primary"},on:{click:e.addSubject}},[e._v("新增凭证")]):e._e(),e._v(" "),e.moreType.length?i("el-dropdown",{staticClass:"receive-drop",attrs:{trigger:"click"},on:{command:e.moreClick}},[i("el-button",{staticClass:"dropdown-btn",attrs:{icon:"el-icon-more"}}),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.moreType,(function(t,n){return i("el-dropdown-item",{key:n,attrs:{command:t.type}},[e._v("\n              "+e._s(t.name)+"\n            ")])})))],1):e._e()],1)]),e._v(" "),i("flexbox",{staticClass:"content-flex",attrs:{justify:"flex-start"}},[i("flexbox",{staticClass:"search"},[i("search-popover-wrapper",{attrs:{"search-time":e.searchTime},on:{"update:searchTime":function(t){e.searchTime=t}}},[i("search-form",{attrs:{"default-value":e.searchForm},on:{change:function(t){e.debounceSearchSubmit(t)}}})],1),e._v(" "),i("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:e.getList,expression:"getList"}],attrs:{type:"subtle",icon:"el-icon-refresh-right"}})],1)],1),e._v(" "),i("flexbox-item",{staticClass:"voucher-table"},[i("el-table",{attrs:{id:"table",data:e.voucherData,height:e.tableHeight,"cell-class-name":e.cellClassName,stripe:""},on:{"row-click":e.handleRowClick,"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",align:"center",width:"40"}}),e._v(" "),e._l(e.voucherList,(function(t,n){return i("el-table-column",{key:n,attrs:{prop:t.field,label:t.label,width:t.width,formatter:e.fieldFormatter,align:t.align,"show-overflow-tooltip":!["digestContent","subjectNumber"].includes(t.field),"header-align":"left"},scopedSlots:e._u([{key:"default",fn:function(n){return["double"!=t.type||"subjectNumber"!=t.field&&"digestContent"!=t.field?"double"==t.type?i("flexbox",{staticClass:"double",class:t.className,attrs:{direction:"column"}},e._l(n.row.certificateDetails,(function(n,a){return i("div",{key:a,staticClass:"td"},[e._v("\n                "+e._s(e.fieldFormatter(n,t))+"\n              ")])}))):"fileNum"==t.field?[i("i",{staticClass:"wk wk-attachment"}),e._v(e._s(n.row.fileNum)+"\n            ")]:i("span",[e._v(e._s(e.fieldFormatter(n.row,t)))]):i("flexbox",{staticClass:"double",class:t.className,attrs:{direction:"column"}},e._l(n.row.certificateDetails,(function(a,r){return i("el-tooltip",{key:r,class:t.field+"_"+n.row.certificateId+"_"+r,attrs:{content:e.fieldFormatter(a,t),disabled:"subjectNumber"==t.field?a.disabled:a.digestDisabled,effect:"dark",placement:"top"}},[i("div",{staticClass:"td subject-name"},[e._v(e._s(e.fieldFormatter(a,t)))])])})))]}}])})})),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,a=t.column,r=t.$index;return[i("el-button",{attrs:{type:"primary-text",size:"default"},on:{click:function(t){e.operateHandle("edit",n,a,r)}}},[e._v("编辑")]),e._v(" "),0==n.checkStatus&&e.$auth("finance.voucher.examine")?i("el-button",{attrs:{type:"primary-text",size:"default"},on:{click:function(t){e.operateHandle("check",n,a,r)}}},[e._v("审核")]):e._e(),e._v(" "),1==n.checkStatus&&e.$auth("finance.voucher.noExamine")?i("el-button",{attrs:{type:"primary-text",size:"default"},on:{click:function(t){e.operateHandle("deCheck",n,a,r)}}},[e._v("反审核")]):e._e(),e._v(" "),e.$auth("finance.voucher.print")?i("el-button",{attrs:{type:"primary-text",size:"default"},on:{click:function(t){e.operateHandle("print",n,a,r)}}},[e._v("打印")]):e._e(),e._v(" "),e.$auth("finance.voucher.delete")?i("el-button",{attrs:{type:"primary-text",size:"default"},on:{click:function(t){e.operateHandle("delete",n,a,r)}}},[e._v("删除")]):e._e()]}}])})],2),e._v(" "),i("div",{staticClass:"p-contianer"},[i("el-pagination",{staticClass:"p-bar",attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,total:e.total,background:"",layout:"prev, pager, next, sizes, total, jumper"},on:{"update:pageSize":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1),e._v(" "),e.tidyDialogVisible?i("tidy-voucher",{attrs:{"tidy-dialog-visible":e.tidyDialogVisible},on:{"handle-success":e.getList,close:function(t){e.tidyDialogVisible=!1}}}):e._e(),e._v(" "),e.insertDialogVisible?i("insert-voucher",{attrs:{"insert-dialog-visible":e.insertDialogVisible},on:{"handle-success":e.getList,close:function(t){e.insertDialogVisible=!1}}}):e._e(),e._v(" "),e.fileDialogVisible?i("el-dialog",{attrs:{visible:e.fileDialogVisible,title:"查看附件",width:"570px"},on:{"update:visible":function(t){e.fileDialogVisible=t}}},[i("reminder",{staticStyle:{display:"inline-block"},attrs:{content:"可批量上传jpg、png、bmp、jpeg等图片文件，最大支持一次性上传100M"}}),e._v(" "),i("voucher-files",{attrs:{"batch-id":e.fileTemp.batchId},on:{change:e.fileChange}}),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.fileDialogVisible=!1}}},[e._v("确定")])],1)],1):e._e(),e._v(" "),e.printSizeDialogVisible?i("PrintPageSetDialog",{attrs:{visible:e.printSizeDialogVisible},on:{"update:visible":function(t){e.printSizeDialogVisible=t},confirm:e.sizeConfirm}}):e._e()],1)},a=[],r=i("c7eb"),o=i("1da1"),c=i("5530"),s=(i("4de4"),i("d3b7"),i("159b"),i("d81d"),i("99af"),i("a15b"),i("caad"),i("14d9"),i("e9c4"),i("a9e3"),i("c740"),i("7db0"),i("b0c0"),i("2a1a")),l=i("224e"),u=i("1603"),f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"main"},[i("el-form",{attrs:{"label-width":"70px","label-position":"top"}},[i("el-form-item",{attrs:{label:"会计期间"}},[i("el-date-picker",{attrs:{"picker-options":e.pickerOptions,type:"monthrange",clearable:!1,"range-separator":"至","start-placeholder":"开始月份","value-format":"yyyy-MM","end-placeholder":"结束月份"},on:{change:e.changeMonth},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"凭证字"}},[i("el-select",{model:{value:e.form.voucherId,callback:function(t){e.$set(e.form,"voucherId",t)},expression:"form.voucherId"}},e._l(e.voucherOptions,(function(e){return i("el-option",{key:e.voucherId,attrs:{label:e.voucherName,value:e.voucherId}})})))],1),e._v(" "),i("el-form-item",{attrs:{label:"凭证号"}},[i("el-input-number",{staticClass:"left-inner",attrs:{controls:!1},model:{value:e.form.certificateNum,callback:function(t){e.$set(e.form,"certificateNum",t)},expression:"form.certificateNum"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"摘要"}},[i("el-input",{model:{value:e.form.digestContent,callback:function(t){e.$set(e.form,"digestContent",t)},expression:"form.digestContent"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"科目"}},[i("subject-select-options",{model:{value:e.form.subjectId,callback:function(t){e.$set(e.form,"subjectId",t)},expression:"form.subjectId"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"金额"}},[i("flexbox",[i("el-input-number",{attrs:{controls:!1},model:{value:e.form.minAmount,callback:function(t){e.$set(e.form,"minAmount",t)},expression:"form.minAmount"}}),e._v(" "),i("span",{staticClass:"range-text"},[e._v("至")]),e._v(" "),i("el-input-number",{attrs:{controls:!1},model:{value:e.form.maxAmount,callback:function(t){e.$set(e.form,"maxAmount",t)},expression:"form.maxAmount"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"制单人"}},[i("wk-user-dialog-select",{staticClass:"relative",attrs:{radio:!0},model:{value:e.form.userId,callback:function(t){e.$set(e.form,"userId",t)},expression:"form.userId"}})],1)],1),e._v(" "),i("flexbox",{staticClass:"footer",attrs:{justify:"flex-end"}},[i("el-button",{on:{click:e.emitClose}},[e._v("关闭")]),e._v(" "),i("el-button",{on:{click:e.resetForm}},[e._v("重置")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.emitChange}},[e._v("查询")])],1)],1)},h=[],d=i("cb41"),m=i("8f81"),p=i("6bfe"),b=i("2f62"),v=i("aa42"),g=i("bc95"),y=i("ed08"),_={name:"SearchForm",components:{SubjectSelectOptions:d["a"],WkUserDialogSelect:m["a"]},mixins:[v["a"],g["a"]],props:{defaultValue:{type:Object,default:function(){}}},data:function(){return{loading:!1,voucherOptions:[],form:{}}},computed:Object(c["a"])(Object(c["a"])({},Object(b["c"])(["financeCurrentAccount","financeFilterTimeRange"])),{},{pickerOptions:function(){var e=this;return{disabledDate:function(t){var i=e.$moment(t);return i.isBefore(e.financeFilterTimeRange.minTime.timeObj)||i.isAfter(e.financeFilterTimeRange.maxTime.timeObj)}}}}),watch:{defaultValue:{handler:function(e){var t=Object(y["s"])(this.form);Object(p["c"])(e)||JSON.stringify(t)===JSON.stringify(e)||(this.form=Object(c["a"])(Object(c["a"])({},this.form),e),this.emitChange())},deep:!0,immediate:!0}},mounted:function(){this.getVoucherCodeGroupList(),this.financeCurrentAccount&&this.financeCurrentAccount.startTime&&this.resetForm()},methods:{resetForm:function(){this.form={startTime:"",endTime:"",subjectId:"",digestContent:"",voucherId:"",userId:"",certificateNum:void 0,minAmount:void 0,maxAmount:void 0,time:[this.financeCurrentAccount.startTime,this.financeCurrentAccount.startTime]},this.emitChange()},getVoucherCodeGroupList:function(){var e=this;Object(l["L"])().then((function(t){e.voucherOptions=t.data})).catch((function(){}))},changeMonth:function(e){this.form.startTime=this.$moment(e[0]).format("YYYYMM"),this.form.endTime=this.$moment(e[1]).format("YYYYMM")},emitClose:function(){var e=this.getParentNode("SearchPopoverWrapper");e&&e.updateData&&e.updateData({searchTime:this.getTimeShowVal(this.form.time),timeInputWidth:this.getTimeInputWidth(this.form.time),popoverVisible:!1})},emitChange:function(){this.form.startTime=this.$moment(this.form.time[0]).format("YYYYMM"),this.form.endTime=this.$moment(this.form.time[1]).format("YYYYMM"),this.$emit("change",this.form),this.emitClose()}}},x=_,w=(i("d7ae"),i("2877")),C=Object(w["a"])(x,f,h,!1,null,"9726c814",null),k=C.exports,j=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{ref:"wkDialog",attrs:{visible:e.tidyDialogVisible,"before-close":e.close,"close-on-click-modal":!1,"label-position":"left",width:"500px"},on:{"update:visible":function(t){e.tidyDialogVisible=t}}},[i("span",{staticClass:"el-dialog__title",attrs:{slot:"title"},slot:"title"},[e._v("\n    整理凭证\n    "),i("i",{staticClass:"wk wk-icon-fill-help wk-help-tips",attrs:{"data-type":"37","data-id":"306"}})]),e._v(" "),i("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"整理范围"}},[i("el-date-picker",{attrs:{type:"month","value-format":"yyyyMM",placeholder:"选择月"},model:{value:e.form.settleTime,callback:function(t){e.$set(e.form,"settleTime",t)},expression:"form.settleTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"凭证字"}},[i("el-select",{model:{value:e.form.voucherId,callback:function(t){e.$set(e.form,"voucherId",t)},expression:"form.voucherId"}},e._l(e.voucherOptions,(function(e,t){return i("el-option",{key:t,attrs:{label:e.voucherName,value:e.voucherId}})})))],1),e._v(" "),i("el-form-item",{attrs:{label:"起始编号"}},[i("el-input",{attrs:{type:"number"},model:{value:e.form.certificateNum,callback:function(t){e.$set(e.form,"certificateNum",t)},expression:"form.certificateNum"}})],1),e._v(" "),i("el-form-item",{attrs:{"label-width":"20px"}},[i("el-radio-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[i("el-radio",{attrs:{label:1}},[e._v("按凭证号顺次前移补齐断号")]),e._v(" "),i("el-radio",{attrs:{label:2}},[e._v("按凭证日期重新顺次编号")])],1)],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:e.submit,expression:"submit"}],attrs:{type:"primary"}},[e._v("确定")]),e._v(" "),i("el-button",{on:{click:e.close}},[e._v("取消")])],1)],1)},S=[],O={props:{tidyDialogVisible:Boolean},data:function(){return{loading:!1,rule:[],voucherOptions:[],form:{voucherId:"",settleTime:"",certificateNum:1,type:1}}},computed:Object(c["a"])({},Object(b["c"])(["financeCurrentAccount"])),watch:{},created:function(){this.getVoucherCodeGroupList(),this.form.settleTime=this.$moment(this.financeCurrentAccount.startTime).format("YYYYMM")},mounted:function(){},methods:{close:function(){this.$emit("close")},submit:function(){var e=this;this.loading=!0;var t=Object(y["s"])(this.form);Object(s["k"])(t).then((function(t){e.loading=!1,e.$message.success("操作成功"),e.$emit("handle-success"),e.$emit("close")})).catch((function(){e.loading=!1}))},getVoucherCodeGroupList:function(){var e=this;Object(l["L"])().then((function(t){e.voucherOptions=t.data;for(var i=0;i<e.voucherOptions.length;i++){var n=e.voucherOptions[i];n.isDefault&&(e.form.voucherId=n.voucherId)}})).catch((function(){}))}}},$=O,T=(i("527d"),Object(w["a"])($,j,S,!1,null,"34c0e6f4",null)),N=T.exports,D=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{ref:"wkDialog",attrs:{visible:e.insertDialogVisible,"before-close":e.close,"close-on-click-modal":!1,"label-position":"left",width:"400px"},on:{"update:visible":function(t){e.insertDialogVisible=t}}},[i("span",{staticClass:"el-dialog__title",attrs:{slot:"title"},slot:"title"},[e._v("\n    插入凭证\n    "),i("i",{staticClass:"wk wk-icon-fill-help wk-help-tips",attrs:{"data-type":"37","data-id":"307"}})]),e._v(" "),i("el-form",{ref:"form",staticClass:"form",attrs:{rules:e.rules,model:e.form,"label-width":"80px","label-position":"left"}},[i("el-form-item",{attrs:{label:"期间",prop:"certificateTime"}},[i("el-date-picker",{attrs:{type:"month","value-format":"yyyyMM",placeholder:"选择月"},model:{value:e.form.certificateTime,callback:function(t){e.$set(e.form,"certificateTime",t)},expression:"form.certificateTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"凭证字",prop:"voucherId"}},[i("el-select",{model:{value:e.form.voucherId,callback:function(t){e.$set(e.form,"voucherId",t)},expression:"form.voucherId"}},e._l(e.voucherOptions,(function(e,t){return i("el-option",{key:t,attrs:{label:e.voucherName,value:e.voucherId}})})))],1),e._v(" "),i("flexbox",[i("el-form-item",{staticClass:"flex",attrs:{prop:"moveCertificateNum","label-width":"0px"}},[e._v("\n\n        将上述期间的： "),i("el-input",{attrs:{type:"number"},model:{value:e.form.moveCertificateNum,callback:function(t){e.$set(e.form,"moveCertificateNum",t)},expression:"form.moveCertificateNum"}})],1),e._v(" "),i("el-form-item",{staticClass:"flex",attrs:{prop:"insertCertificateNum","label-width":"0px"}},[e._v("\n\n        号移动到："),i("el-input",{attrs:{type:"number"},model:{value:e.form.insertCertificateNum,callback:function(t){e.$set(e.form,"insertCertificateNum",t)},expression:"form.insertCertificateNum"}}),e._v("号之前\n\n      ")],1)],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:e.submit,expression:"submit"}],attrs:{type:"primary"}},[e._v("确定")]),e._v(" "),i("el-button",{on:{click:e.close}},[e._v("取消")])],1)],1)},I=[],A=i("c1df"),V=i.n(A),Y={props:{insertDialogVisible:Boolean},data:function(){return{loading:!1,rule:[],voucherOptions:[],form:{voucherId:"",certificateTime:"",moveCertificateNum:"",insertCertificateNum:""},rules:{certificateTime:[{required:!0,message:"请填期间",trigger:"blur"}],voucherId:[{required:!0,message:"请选择凭证字",trigger:"blur"}],moveCertificateNum:[{required:!0,message:"请填写需要移动的凭证号",trigger:"blur"}],insertCertificateNum:[{required:!0,message:"请填写需要移动的凭证号",trigger:"blur"}]}}},computed:Object(c["a"])({},Object(b["c"])(["financeCurrentAccount"])),watch:{},created:function(){this.getVoucherCodeGroupList(),this.financeCurrentAccount&&this.financeCurrentAccount.startTime&&(this.form.certificateTime=V()(this.financeCurrentAccount.startTime).format("YYYYMM"))},mounted:function(){},methods:{close:function(){this.$emit("close")},submit:function(){var e=this;this.$refs.form.validate((function(t){if(t){e.loading=!0;var i=Object(y["s"])(e.form);Object(s["i"])(i).then((function(t){e.loading=!1,e.$message.success("操作成功"),e.$emit("handle-success"),e.$emit("close")})).catch((function(){e.loading=!1}))}}))},getVoucherCodeGroupList:function(){var e=this;Object(l["L"])().then((function(t){e.voucherOptions=t.data;for(var i=0;i<e.voucherOptions.length;i++){var n=e.voucherOptions[i];n.isDefault&&(e.form.voucherId=n.voucherId)}})).catch((function(){}))}}},P=Y,z=(i("80b1"),Object(w["a"])(P,D,I,!1,null,"53d15c8e",null)),F=z.exports,M=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"voucher-files"},[e.showFileForm?i("div",{staticClass:"section"},[i("div",{staticClass:"section__hd"},[i("span",[e._v("附件")]),e._v(" "),e.fileList.length?i("span",[e._v("("+e._s(e.fileList.length)+")")]):e._e()]),e._v(" "),i("div",{staticClass:"section__bd"},[e._l(e.fileList,(function(t,n){return i("file-cell",{key:t.fileId,attrs:{data:t,"delete-show":"",list:e.fileList,index:n},on:{delete:e.accessoryDeleteFun}})})),e._v(" "),i("el-upload",{staticClass:"upload-file",attrs:{"http-request":e.httpRequest,action:"https://jsonplaceholder.typicode.com/posts/",multiple:"","list-type":"picture"}},[i("span",{staticClass:"add-btn"},[i("i",{staticClass:"wk wk-l-plus"}),e._v(" "),i("span",{staticClass:"label"},[e._v("附件")])])])],2)]):e._e()])},L=[],B=(i("a434"),i("b5b9")),E=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("flexbox",{staticClass:"wk-file-cell"},[i("img",{staticClass:"wk-file-cell__header",attrs:{src:e.fileIcon,alt:""}}),e._v(" "),i("div",{staticClass:"wk-file-cell__body text-one-line",class:{"cursor-pointer":e.cursorPointer}},[e._v("\n    "+e._s(e.fileName.length>20?e.fileName.substring(0,20)+"...":e.fileName)+"\n  ")]),e._v(" "),i("div",{staticClass:"wk-file-cell__size"},[e._v("\n    ("+e._s(e._f("getFileSize")(e.data.size))+")\n  ")]),e._v(" "),i("div",{staticClass:"wk-file-cell__footer"},[e.previewShow?i("span",{staticClass:"xr-text-btn primary",on:{click:e.previewClick}},[e._v("预览")]):e._e(),e._v(" "),i("span",{staticClass:"xr-text-btn primary",on:{click:e.downloadClick}},[e._v("下载")]),e._v(" "),e.deleteShow?i("span",{staticClass:"xr-text-btn delete",on:{click:e.deleteClick}},[e._v("删除")]):e._e()])])},q=[],R=i("2934"),H={name:"WkFileCell",filters:{getFileSize:function(e){return Object(y["e"])(e)}},props:{index:Number,data:Object,list:Array,showFoot:{type:Boolean,default:!0},cursorPointer:{type:Boolean,default:!1},previewShow:{type:Boolean,default:!0},deleteShow:{type:Boolean,default:!1}},data:function(){return{}},computed:{fileName:function(){return this.data?this.data.name||this.data.fileName:""},fileIcon:function(){var e=this.fileName?this.fileName.split("."):[],t="";return t=e.length>0?e[e.length-1]:"",Object(y["i"])(t)}},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{downloadClick:function(){var e=this;Object(R["g"])(this.data.url).then((function(t){Object(y["d"])(t.data,e.data.name)})).catch((function(){}))},previewClick:function(){Object(y["a"])(this.fileName)?Object(y["A"])(this.data.url,this.fileName):this.$wkPreviewFile.preview({index:this.index||0,data:this.list.map((function(e){return{url:e.url,name:e.name}}))})},deleteClick:function(){var e=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$emit("delete",e.data,e.index)})).catch((function(){}))}}},W=H,U=(i("f85c"),Object(w["a"])(W,E,q,!1,null,"c2587f14",null)),Z=U.exports,G={name:"VoucherFiles",components:{FileCell:Z},props:{batchId:{type:String,required:!0}},data:function(){return{loading:!1,showFileForm:!1,fileList:[]}},mounted:function(){this.getFileListByBatchId()},methods:{getFileListByBatchId:function(){var e=this;this.loading=!0,this.showFileForm=!1,this.$nextTick((function(){Object(B["d"])(e.batchId).then((function(t){e.loading=!1,e.showFileForm=!0,e.fileList=t.data||[]})).catch((function(){e.loading=!1,e.showFileForm=!0}))}))},httpRequest:function(e){var t=this;this.$wkUploadFile.upload({file:e.file,params:{batchId:this.batchId}}).then((function(e){var i=e.res,n=i.data||{};t.fileList.push(n),t.fileChange(t.fileList,n.batchId),t.$message.success("上传成功")})).catch((function(){}))},accessoryDeleteFun:function(e,t){var i=this;Object(B["a"])(e.fileId).then((function(n){i.fileList.splice(t,1),i.fileChange(i.fileList,e.batchId)})).catch((function(){}))},fileChange:function(e,t){var i=this;this.fileList=e,this.showFileForm=!1,this.$nextTick((function(){i.showFileForm=!0})),this.$emit("change",e,t)}}},J=G,K=(i("674a"),Object(w["a"])(J,M,L,!1,null,"0128bc69",null)),Q=K.exports,X=i("8f37"),ee=i("eee7"),te=i("e297"),ie=i.n(te),ne=i("7a1a"),ae=i("8c73"),re=i("b699"),oe=i("2adb"),ce=i.n(oe),se=i("cd42"),le=i("c9d9"),ue={name:"VoucherSearch",components:{SearchPopoverWrapper:u["a"],SearchForm:k,TidyVoucher:N,InsertVoucher:F,VoucherFiles:Q,Reminder:X["a"],PrintPageSetDialog:ee["a"]},mixins:[re["a"]],beforeRouteEnter:function(e,t,i){i((function(e){t.query.params&&t.query.listParams&&(e.searchForm=Object(c["a"])(Object(c["a"])({},e.searchForm),t.query.params),e.currentPage=t.query.listParams.currentPage,e.scrollTop=t.query.scrollTop||0)}))},data:function(){return{loading:!1,tableHeight:document.documentElement.clientHeight-280,currencyOptions:[],searchForm:{},multipleSelection:[],voucherList:[{label:"日期",field:"certificateTime",width:"100px"},{label:"凭证字号",field:"certificateNum",width:"100px"},{label:"摘要",field:"digestContent",type:"double",className:"left"},{label:"科目",field:"subjectNumber",type:"double",className:"left"},{label:"借方金额",field:"debtorBalance",type:"double",align:"right",width:"150px"},{label:"贷方金额",field:"creditBalance",type:"double",align:"right",width:"150px"},{label:"附件",field:"fileNum",width:"80px"},{label:"制单人",field:"createUserName",width:"100px"},{label:"审核人",field:"examineUserName",width:"100px"}],currentPage:1,pageSize:ie.a.get(le["f"])||10,pageSizes:[10,20,30,40],total:0,subjectList:[],debounceSearchSubmit:null,tidyDialogVisible:!1,insertDialogVisible:!1,fileDialogVisible:!1,fileTemp:null,scorllTop:0,voucherData:[],printSizeDialogVisible:!1,printType:""}},computed:Object(c["a"])({moreType:function(){var e=[{name:"打印凭证",type:"printVoucher",show:this.$auth("finance.voucher.print")},{name:"审核",type:"examine",show:this.$auth("finance.voucher.examine")&&this.multipleSelection.length},{name:"反审核",type:"cancelAudit",show:this.$auth("finance.voucher.noExamine")&&this.multipleSelection.length},{name:"打印列表",type:"print",show:this.$auth("finance.voucher.print")},{name:"导出",type:"export",show:this.$auth("finance.voucher.export")},{name:"批量删除",type:"batchDelete",show:this.$auth("finance.voucher.delete")&&this.multipleSelection.length},{name:"整理",type:"tidy",show:this.$auth("finance.voucher.arrangement")},{name:"插入",type:"insert",show:this.$auth("finance.voucher.insert")},{name:"导入",type:"import",show:this.$auth("finance.voucher.import")}];return e.filter((function(e){return e.show}))}},Object(b["c"])(["financeCurrentAccount"])),created:function(){var e=this;window.onresize=function(){e.tableHeight=document.documentElement.clientHeight-280,e.isOverflowDisabled()},this.getSubjectList(),this.debounceSearchSubmit=Object(ne["debounce"])(500,this.handleToSearch),this.getVoucherTimeRange()},methods:Object(c["a"])(Object(c["a"])({},Object(b["b"])(["getVoucherTimeRange"])),{},{getList:function(){var e=this;this.loading=!0,Object(s["y"])(Object(c["a"])({page:this.currentPage,limit:this.pageSize},this.searchForm)).then((function(t){e.loading=!1;var i=t.data.list||[];i.forEach((function(e){e.fileNum=e.fileEntityList?e.fileEntityList.length:e.fileNum||0,e.certificateDetails.forEach((function(e,t){e.disabled=!0,e.digestDisabled=!0}))})),e.voucherData=i;var n=e.currentPage;e.currentPage=0,e.$nextTick((function(){document.querySelector(".is-scrolling-none")&&(document.querySelector(".is-scrolling-none").scrollTop=e.scrollTop),e.currentPage=n,e.scrollTop=0})),e.isOverflowDisabled(),e.total=t.data.totalRow})).catch((function(){e.loading=!1}))},handleToSearch:function(e){this.searchForm=e,this.currentPage=1,this.getList()},isOverflowDisabled:function(){var e=this;this.$nextTick((function(){e.voucherData.forEach((function(e){e.certificateDetails.forEach((function(t,i){var n="subjectNumber_"+e.certificateId+"_"+i,a=document.querySelector(".double .".concat(n));a&&a.scrollWidth>a.offsetWidth?t.disabled=!1:t.disabled=!0;var r="digestContent_"+e.certificateId+"_"+i,o=document.querySelector(".double .".concat(r));o&&o.scrollWidth>o.offsetWidth?t.digestDisabled=!1:t.digestDisabled=!0}))}))}))},deleteById:function(){var e=this;this.multipleSelection.length?this.$confirm("您确认要删除此凭证吗？删除后将不可恢复，并会产生断号","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.multipleSelection.map((function(e){return e.certificateId}));e.loading=!0,Object(s["w"])({ids:t}).then((function(t){e.getList(),e.$message.success("操作成功"),e.loading=!1})).catch((function(){e.loading=!1}))})).catch((function(){})):this.$message.warning("请先选择你想要删除的凭证！")},fileChange:function(e){this.$set(this.fileTemp,"fileNum",e.length)},exportAll:function(){var e,t={};t=null!==(e=this.multipleSelection)&&void 0!==e&&e.length?Object(c["a"])({certificateIds:this.multipleSelection.map((function(e){return e.certificateId}))},this.searchForm):Object(c["a"])({page:this.currentPage,limit:this.pageSize},this.searchForm),Object(s["c"])(t).then((function(e){Object(y["b"])(e)}))},moreClick:function(e){switch(e){case"batchDelete":this.deleteById();break;case"cancelAudit":this.checkStatus(0);break;case"examine":this.checkStatus(1);break;case"export":this.exportAll();break;case"import":this.importVoucher();break;case"tidy":this.tidyDialogVisible=!0;break;case"insert":this.insertDialogVisible=!0;break;case"print":this.printVoucherList();break;case"printVoucher":this.printSizeDialogVisible=!0,this.printType="printVoucher";break;default:break}},sizeConfirm:function(e){var t=this;"printVoucher"==this.printType?this.printVoucher(e):"rowPrintVoucher"==this.printType&&this.printVoucher(e).then((function(e){t.multipleSelection=[]})),this.printSizeDialogVisible=!1},printVoucherList:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){var i,n,a,o,l;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=[],t.prev=1,e.loading=!0,t.next=5,Object(s["y"])(Object(c["a"])({pageType:0},e.searchForm));case 5:n=t.sent,a=n.data,i=a.list,e.loading=!1,t.next=15;break;case 11:return t.prev=11,t.t0=t["catch"](1),e.loading=!1,t.abrupt("return");case 15:i=e.voucherDataformat(i),o=e.voucherList.filter((function(e){return"fileNum"!=e.field})),l="\n              <head>\n                <style>\n                  @page {size: auto;size:A3;margin:6mm}\n                  td,th{border:1px solid !important;padding: 10px 0;}\n                  table{border-collapse: collapse;font-size:20px;}\n                  .el-table__cell.gutter{border:none !important;}\n                  .el-table__empty-text{text-align: center;width: 100%;}\n                  tr{page-break-inside:avoid}\n                  .el-table__empty-text{display:none}\n                  .el-table__footer-wrapper{display:none}\n                </style>\n              </head>\n              <div >\n                <div style='text-align:center;font-size:30px; font-weight:bold'>凭证列表</div>\n                <div style='display:flex; font-size:26px;padding: 10px 0'>\n                  <span style=\"flex:1\">编制单位：".concat(e.financeCurrentAccount.companyName,'</span>\n                  <span style="flex:1; text-align:right;float: right;">\n                  ').concat(e.displayTime||e.$moment(e.financeCurrentAccount.startTime,"YYYYMM").format("YYYY年第MM期"),'\n                  </span>\n              </div>\n            </div>\n          <table border="1" cellspacing="0" cellpadding="0" style="border-collapse:collapse;width:100%">\n            <tr>\n              ').concat(o.map((function(e){return"<td>".concat(e.label,"</td>")})).join(" "),"\n            </tr>\n            ").concat(i.map((function(t,n){return"\n            <tr>\n              ".concat(o.map((function(a){return e.isShowTd(i,t,a,n)?'\n            <td rowspan="'.concat(["certificateTime","certificateNum","createUserName","examineUserName"].includes(a.field)?t.rowspan:"",'">\n             ').concat(e.fieldFormatter(t,a)||"","\n            </td>"):""})).join(" "),"\n            </tr>\n                    ")})).join(" "),"\n          </table>\n                  "),Object(s["f"])({type:"pdf",content:l}).then((function(t){var i=t.data,n=e.$router.resolve({name:"PrintPage",query:{key:i}});window.open(n.href,"_blank")}));case 19:case"end":return t.stop()}}),t,null,[[1,11]])})))()},voucherDataformat:function(e){var t=[];return e.forEach((function(e){e.certificateDetails.length&&e.certificateDetails.forEach((function(i,n){t.push(Object(c["a"])(Object(c["a"])(Object(c["a"])({},e),i),{},{rowspan:0==n?e.certificateDetails.length:"",examineUserName:i.examineUserName||""}))}))})),t},printVoucher:function(e){var t=this;return Object(o["a"])(Object(r["a"])().mark((function i(){var n,a,o,l,u,f,h,d,m,p,b,v,g,y,_,x,w,C,k;return Object(r["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a=[{label:"摘要",field:"digestContent"},{label:"会计科目",field:"subjectNumber"},{label:"借方金额",field:"debtorBalance"},{label:"贷方金额",field:"creditBalance"}],o=[],null===(n=t.multipleSelection)||void 0===n||!n.length){i.next=6;break}o=JSON.parse(JSON.stringify(t.multipleSelection)),i.next=20;break;case 6:return t.loading=!0,i.prev=7,i.next=10,Object(s["y"])(Object(c["a"])({pageType:0},t.searchForm));case 10:l=i.sent,u=l.data,t.loading=!1,o=u.list,i.next=20;break;case 16:return i.prev=16,i.t0=i["catch"](7),t.loading=!1,i.abrupt("return");case 20:for(f=[],h=0;h<o.length;h++)if(m=o[h],null!==(d=m.certificateDetails)&&void 0!==d&&d.length)if(m.totalDebite=t.computeTotal("totalDebite",m),m.totalCredit=t.computeTotal("totalCredit",m),m.certificateDetails.length<=4){for(p=4-m.certificateDetails.length,b=0;b<p;b++)m.certificateDetails.push({});f.push(Object(c["a"])(Object(c["a"])({},m),{},{currentPage:1,totalPage:1}))}else{for(v=[],g=0,y=Math.ceil(m.certificateDetails.length/4),_=0;_<m.certificateDetails.length;_++)x=m.certificateDetails[_],_&&_%4==0?(f.push(Object(c["a"])(Object(c["a"])({},m),{},{certificateDetails:v,currentPage:++g,totalPage:y})),v=[],v.push(x)):v.push(x);if(v.length){for(w=4-v.length,C=0;C<w;C++)v.push({});f.push(Object(c["a"])(Object(c["a"])({},m),{},{certificateDetails:v,currentPage:++g,totalPage:y}))}}o=f,k="\n      <head>\n      <style>\n        *{\n          margin:0;padding:0;\n          font-size:".concat(e.fontSize||"14px",";\n        }\n        th,td{\n          padding:20px 0;\n        }\n        .title{\n          padding:10px 0;\n        }\n        .title-item{\n          display:inline-block;\n          width:33%;\n        }\n        .title-item:nth-child(2){\n          text-align: center;\n        }\n        .title-item:nth-child(3){\n          text-align: right;\n        }\n        .footer{\n          padding:10px 0;\n        }\n        .footer-item{\n          width:24%;\n          display:inline-block;\n        }\n        .footer-item:nth-child(2){\n          text-align: center;\n        }\n        .footer-item:nth-child(3){\n          text-align: center;\n        }\n        .footer-item:nth-child(4){\n          text-align: right;\n        }\n      </style>\n    </head>\n        ").concat(o.map((function(e){return'\n    <div style="font-size: 20px;">\n      <div style="font-size: 30px;text-align: center;">记账凭证</div>\n      <div style="width: 200px;border-bottom: 1px solid;border-top: 1px solid;height: 5px; margin: 10px auto;"/>\n    </div>\n    <div style="overflow: hidden;">\n      <span style="float:right;">\n        附单据&nbsp;&nbsp;'.concat(e.fileNum||"",'&nbsp;&nbsp;张\n      </span>\n    </div>\n    <div class="title" style="display: flex;justify-content: space-between;padding: 5px 0;">\n      <div class="title-item">\n        <span>单位：').concat(t.financeCurrentAccount.companyName,'</span>\n      </div>\n      <div class="title-item">\n        <span>日期：').concat(t.voucherTime(e.certificateTime),'</span>\n      </div>\n      <div class="title-item">\n        <span> 凭证号：').concat(e.certificateNum+" ("+e.currentPage+"/"+e.totalPage+")",'</span>\n      </div>\n    </div>\n    <table border="1" cellspacing="0" cellpadding="0" style="border-collapse: collapse;width:100%;page-break-inside:avoid;">\n      <tr>\n        ').concat(a.map((function(e){return"<th >\n      ".concat(e.label,"\n    </th>")})).join(" "),"\n      </tr>\n        ").concat(e.certificateDetails.map((function(e){return"<tr>\n        ".concat(a.map((function(i){return"<td >\n      ".concat(t.fieldFormatter(e,i),"\n    </td>")})).join(" "),"\n      </tr>")})).join(" "),'\n\n      <tr>\n        <td colspan="2">合计： ').concat(ce.a.toMoney(Number(e.total),{outSymbol:!1})," </td>\n        <td> ").concat(e.totalDebite," </td>\n        <td> ").concat(e.totalCredit,' </td>\n      </tr>\n    </table>\n    <div class="footer">\n      <div class="footer-item">\n        <span>财务主管：</span>\n      </div>\n      <div class="footer-item">\n        <span>审核：').concat(e.examineUserName||"",'</span>\n      </div>\n      <div class="footer-item">\n        <span>出纳：</span>\n      </div>\n      <div class="footer-item">\n        <span>制单：').concat(e.createUserName,'</span>\n      </div>\n    </div>\n    <div style="page-break-after:always;"></div>\n          ')})).join(" "),"\n      "),Object(s["e"])({type:"pdf",content:k,orientation:e.orientation||"Portrait",marginLeft:"".concat(e.left||0,"mm"),marginTop:"".concat(e.top||0,"mm"),pageWidth:"".concat(e.width||0,"mm"),pageHeight:"".concat(e.height,"mm")}).then((function(e){var i=e.data,n=t.$router.resolve({name:"PrintPage",query:{key:i}});window.open(n.href,"_blank")}));case 25:case"end":return i.stop()}}),i,null,[[7,16]])})))()},computeTotal:function(e,t){var i=0;return t.certificateDetails.forEach((function(t){i="totalDebite"==e?Object(se["a"])(i,t.debtorBalance):Object(se["a"])(i,t.creditBalance)})),Object(ae["h"])(i)},voucherTime:function(e){if(e){var t=e.split("-");return"".concat(t[0],"年第").concat(t[1],"期")}return""},isShowTd:function(e,t,i,n,a){return!["certificateTime","certificateNum","createUserName","examineUserName"].includes(i.field)||!n||e[n-1].certificateId!=t.certificateId},handleSizeChange:function(e){ie.a.set(le["f"],e),this.pageSize=e,this.getList()},importVoucher:function(){this.$wkImport.import("fmVoucher",{typeName:"凭证",historyShow:!1,noImportProcess:!0,ownerSelectShow:!1,repeatHandleShow:!1,importRequest:s["h"],templateRequest:s["g"],userInfo:this.userInfo,coverShow:!1})},handleCurrentChange:function(e){this.currentPage=e,this.getList()},handleSelectionChange:function(e){this.multipleSelection=e},checkStatus:function(e){var t=this;if(this.multipleSelection.length){this.loading=!0;var i=this.multipleSelection.map((function(e){return e.certificateId}));Object(s["v"])({ids:i,status:e}).then((function(e){t.$message.success("操作成功"),t.getList(),t.loading=!1})).catch((function(){t.loading=!1}))}else this.$message.warning("请先选择你想要".concat(1==e?"审核":"反审核","的凭证！"))},handleRowClick:function(e,t,i){"selection"!==t.type&&("certificateNum"===t.property?this.$router.push({path:"/fm/voucher/subs/create",query:{ids:this.voucherData.map((function(e){return e.certificateId})).join(","),index:this.voucherData.findIndex((function(t){return t.certificateId==e.certificateId})),params:Object(c["a"])({},this.searchForm),listParams:{currentPage:this.currentPage},scrollTop:document.querySelector(".is-scrolling-none")&&document.querySelector(".is-scrolling-none").scrollTop}}):"fileNum"==t.property&&(this.fileTemp=e,this.fileDialogVisible=!0))},cellClassName:function(e){e.row;var t=e.column;e.rowIndex,e.columnIndex;if("certificateNum"===t.property||"fileNum"===t.property)return"can-visit--underline"},getSubjectName:function(e,t){var i=this.subjectList.find((function(e){return e.subjectId===t}));return i&&(e="".concat(i.subjectName,"_").concat(e)),i&&Number(i.parentId)&&(e=this.getSubjectName(e,i.parentId)),e},fieldFormatter:function(e,t){if(Object(p["c"])(e))return" ";if("subjectNumber"===t.field){var i=e.subjectName,n=JSON.parse(e.subjectContent);Number(n.parentId)&&(i=this.getSubjectName(i,n.parentId));var a=[i];e.associationBOS.forEach((function(e){a.push(e.carteNumber+e.name)}));var r=a.filter((function(e){return e})).join("_");return"".concat(e[t.field]," ").concat(r)}return"examineUserName"===t.field?e.checkStatus?e[t.field]:"未审核":"certificateTime"===t.field?this.$moment(e[t.field]).format("YYYY-MM-DD"):["debtorBalance","creditBalance"].includes(t.field)?e[t.field]?Object(ae["h"])(e[t.field]):"":e[t.field]},getSubjectList:function(){var e=this;Object(l["H"])({type:null,isTree:0}).then((function(t){e.subjectList=t.data||[]}))},addSubject:function(){this.$router.push("/fm/voucher/subs/create")},operateHandle:function(e,t,i,n){var a=this;"edit"===e?this.$router.push({path:"/fm/voucher/subs/create",query:{ids:this.voucherData.map((function(e){return e.certificateId})).join(","),index:this.voucherData.findIndex((function(e){return e.certificateId==t.certificateId})),params:Object(c["a"])({},this.searchForm),listParams:{currentPage:this.currentPage},scrollTop:document.querySelector(".is-scrolling-none")&&document.querySelector(".is-scrolling-none").scrollTop}}):"check"===e?this.updateCheckStatus([t.certificateId],1):"deCheck"===e?this.updateCheckStatus([t.certificateId],0):"print"===e?(this.multipleSelection=[t],this.printSizeDialogVisible=!0,this.printType="rowPrintVoucher"):"delete"===e&&this.$confirm("您确认要删除此凭证吗？删除后将不可恢复，并会产生断号","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=[t.certificateId];a.loading=!0,Object(s["w"])({ids:e}).then((function(e){a.getList(),a.$message.success("操作成功"),a.loading=!1})).catch((function(){a.loading=!1}))})).catch((function(){}))},updateCheckStatus:function(e,t){var i=this;this.loading=!0,Object(s["v"])({ids:e,status:t}).then((function(e){i.$message.success("操作成功"),i.getList(),i.loading=!1})).catch((function(){i.loading=!1}))}})},fe=ue,he=(i("5b12"),Object(w["a"])(fe,n,a,!1,null,"8580fe14",null));t["default"]=he.exports},"2adb":function(e,t,i){var n=i("772f"),a={s:i("a8bb"),b:i("f4fd")};e.exports=n(a.s,a.b)},"34b8":function(e,t,i){"use strict";i("a1e3")},"38cf":function(e,t,i){var n=i("23e7"),a=i("1148");n({target:"String",proto:!0},{repeat:a})},"3a3e":function(e,t,i){},"4db9":function(e,t,i){},"527d":function(e,t,i){"use strict";i("4db9")},"5b12":function(e,t,i){"use strict";i("3a3e")},6194:function(e,t,i){},"61ec":function(e,t,i){},"674a":function(e,t,i){"use strict";i("def5")},"772f":function(e,t,i){var n=i("a055"),a=i("92be");function r(e,t){return{encodeS:function(t,i){return i=a.extend({ww:!0,tenMin:!0},i),n.CL.call(e,t,i)},encodeB:function(e,i){return i=a.extend({ww:!0},i),n.CL.call(t,e,i)},decodeS:function(){return n.unCL.apply(e,arguments)},decodeB:function(){return n.unCL.apply(t,arguments)},toMoney:function(e,i){return i=a.extend({ww:!0},i),n.toMoney.call(t,e,i)}}}e.exports=r},"80b1":function(e,t,i){"use strict";i("9d99")},"88db":function(e,t,i){},"8f37":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("flexbox",{staticClass:"reminder-wrapper"},[i("flexbox",{staticClass:"reminder-body",attrs:{align:"stretch"}},[i("i",{staticClass:"wk wk-warning reminder-icon"}),e._v(" "),i("div",{staticClass:"reminder-content",style:{"font-size":e.fontSize+"px"},domProps:{innerHTML:e._s(e.content)}}),e._v(" "),e._t("default"),e._v(" "),e.closeShow?i("i",{staticClass:"el-icon-close close",on:{click:e.close}}):e._e()],2)],1)},a=[],r={name:"Reminder",components:{},props:{closeShow:{type:Boolean,default:!1},content:{type:String,default:"内容"},fontSize:{type:String,default:"14"}},data:function(){return{}},computed:{},mounted:function(){},destroyed:function(){},methods:{close:function(){this.$emit("close")}}},o=r,c=(i("b694"),i("2877")),s=Object(c["a"])(o,n,a,!1,null,"82904f82",null);t["a"]=s.exports},"92be":function(e,t,i){"use strict";var n=/^([+-])?0*(\d+)(\.(\d+))?$/,a=/^([+-])?0*(\d+)(\.(\d+))?e(([+-])?(\d+))$/i,r=t.e2ten=function(e){var t=a.exec(e.toString());if(!t)return e;var i=t[2],n=t[4]||"",r=t[5]?+t[5]:0;if(r>0){var o=n.substr(0,r);o=o.length<r?o+new Array(r-o.length+1).join("0"):o,n=n.substr(r),i+=o}else{r=-r;var c=i.length-r;c=c<0?0:c;var s=i.substr(c,r);s=s.length<r?new Array(r-s.length+1).join("0")+s:s,i=i.substring(0,c),n=s+n}return i=""==i?"0":i,("-"==t[1]?"-":"")+i+(n?"."+n:"")};t.getNumbResult=function(e){var t=n.exec(e.toString());if(!t&&a.test(e.toString())&&(t=n.exec(r(e.toString()))),t)return{int:t[2],decimal:t[4],minus:"-"==t[1],num:t.slice(1,3).join("")}},t.centerArray=function e(t,i){if(t.splice.apply(t,[0,i.length].concat(i.splice(0,i.length))),arguments.length>2){var n=[].slice.call(arguments,2);n.unshift(t),e.apply(null,n)}return t};var o=t.hasAttr=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};t.extend=function(e){for(var t,i=arguments[0]||{},n=Array.prototype.slice.call(arguments,1),a=0;a<n.length;a++){var r=n[a];for(t in r)o(r,t)&&(i[t]=r[t])}return i},t.getDigit=function(e){return e>=5?4*(e-4)+4:e},t.unshiftZero=function(e,t){if(null==t&&(t=1),!(t<=0))for(;t--;)e.unshift(0)},t.clearZero=function(e,t,i){if(null==e)return"";var n=~"*.?+$^[](){}|\\/".indexOf(t)?"\\"+t:t,a=new RegExp("^"+n+"+"),r=new RegExp(n+"+$"),o=new RegExp(n+"{2}","g");return e=e.toString(),"^"==i&&(e=e.replace(a,"")),i&&"$"!=i||(e=e.replace(r,"")),i&&"nto1"!=i||(e=e.replace(o,t)),e}},"9d99":function(e,t,i){},a055:function(e,t,i){var n=i("92be");function a(e,t){var i=n.getNumbResult(e);if(!i)return e;t=t||{};var a=this.ch,r=this.ch_u,o=this.ch_f||"",c=this.ch_d||".",s=a.charAt(0),l=i.int,u=i.decimal,f=i.minus,h="",d="",m=f?o:"",p=function e(i,o,c){i=n.getNumbResult(i).int;var l="",u=arguments.length>1?arguments[1]:t.tenMin,f=i.length;if(1==f)return a.charAt(+i);if(f<=4)for(var h=0,d=f;d--;){var m=+i.charAt(h);l+=u&&2==f&&0==h&&1==m?"":a.charAt(m),l+=m&&d?r.charAt(d):"",h++}else{var p=i.length/4>>0,b=i.length%4;while(0==b||!r.charAt(3+p))b+=4,p--;var v=i.substr(0,b),g=i.substr(b);l=e(v,u)+r.charAt(3+p)+("0"==g.charAt(0)?s:"")+e(g,g.length>4&&u)}return l=n.clearZero(l,s),l};if(u){u=n.clearZero(u,"0","$");for(var b=0;b<u.length;b++)d+=a.charAt(+u.charAt(b));d=d?c+d:""}if(h=p(l),t.ww&&r.length>5){var v=r.charAt(4),g=r.charAt(5),y=h.lastIndexOf(g);~y&&(h=h.substring(0,y).replace(new RegExp(g,"g"),v+v)+h.substring(y))}return m+h+d}function r(e){e=e.toString();var t=e.split(this.ch_d),i=t[0].replace(this.ch_f,""),a=t[1],r=!!~t[0].indexOf(this.ch_f),o=this.ch_u.charAt(1),c=this.ch_u.charAt(4),s=this.ch_u.charAt(5);i=i.replace(new RegExp(c+"{2}","g"),s);for(var l=i.split(""),u=0,f=0,h=[],d=[],m=[],p=0;p<l.length;p++){var b=l[p],v=0,g=0;if(~(v=this.ch.indexOf(b)))v>0&&m.unshift(v);else if(~(g=this.ch_u.indexOf(b))){var y=n.getDigit(g);u>g?(n.unshiftZero(m,y),n.centerArray(d,m)):g>=f?(0==p&&(m=[1]),n.centerArray(h,d,m),h.length>0&&n.unshiftZero(h,y),f=g):(0==m.length&&o==b&&(m=[1]),n.centerArray(d,m),n.unshiftZero(d,n.getDigit(g)),u=g)}}n.centerArray(h,d,m).reverse(),0==h.length&&h.push(0);var _=0;if(a){h.push("."),_="0.";for(p=0;p<a.length;p++)_+=this.ch.indexOf(a.charAt(p)),h.push(this.ch.indexOf(a.charAt(p)));_=+_}return r&&h.unshift("-"),parseFloat(h.join(""))}function o(e,t){var i={ww:!0,complete:!1,outSymbol:!0},r=n.getNumbResult(e),o=this.ch.charAt(0);if(t="object"==typeof t?t:{},!r)return e;t=n.extend(i,t);var c=r.num,s=r.decimal||"",l=t.outSymbol?this.m_t:"",u=s?"":this.m_z,f="";if(t.complete){for(var h=1;h<this.m_u.length;h++)f+=a.call(this,s.charAt(h-1)||"0")+this.m_u.charAt(h);u=a.call(this,c,t)+this.m_u.charAt(0)}else{if(s=s.substr(0,this.m_u.length-1),s=n.clearZero(s,"0","$"),s){var d;for(h=0;h<this.m_u.length-1;h++)s.charAt(h)&&"0"!=s.charAt(h)&&(f+=a.call(this,s.charAt(h))+this.m_u.charAt(h+1),d=!1),"0"!==s.charAt(h)||d||(0==h&&"0"==c||(f+=o),d=!0)}"0"==c&&!u&&f||(u=a.call(this,c,t)+this.m_u.charAt(0)+u)}return l+u+f}e.exports={CL:a,unCL:r,toMoney:o}},a1e3:function(e,t,i){},a8bb:function(e,t){e.exports={ch:"零一二三四五六七八九",ch_u:"个十百千万亿",ch_f:"负",ch_d:"点"}},aa42:function(e,t,i){"use strict";i("b0c0");t["a"]={methods:{getParentNode:function(e){var t=this.$parent||this.$root,i=t.$options.name;while(t&&(!i||i!==e))t=t.$parent,t&&(i=t.$options.name);return t}}}},b694:function(e,t,i){"use strict";i("fd75")},b699:function(e,t,i){"use strict";var n=i("5530"),a=(i("99af"),i("add5")),r=i.n(a),o=i("2f62"),c=i("bc95");t["a"]={data:function(){return{printFooterShow:!1,pageTitle:"",searchTime:""}},mixins:[c["a"]],computed:Object(n["a"])(Object(n["a"])({},Object(o["c"])(["financeCurrentAccount"])),{},{displayTime:function(){return this.searchTime||this.dataTime&&this.$moment(this.dataTime,"YYYYMM").format("YYYY年第MM期")||this.dateValue&&this.$moment(this.dateValue,"YYYYMM").format("YYYY年第MM期")||this.timeArray&&this.timeArray.length&&this.getTimeShowVal(this.timeArray)}}),methods:{HandlerPrint:function(e,t){var i=this,n=t.title,a=void 0===n?"":n,o=t.style,c=void 0===o?"":o,s=t.centerText,l=void 0===s?"":s,u=t.headerHtml,f=void 0===u?"":u,h=t.type,d=void 0===h?"html":h;this.printFooterShow=!0;var m="\n      <div >\n        <div style='text-align:center;font-size:30px; font-weight:bold'>".concat(this.pageTitle||a,"</div>\n        <div style='display:flex; font-size:26px;padding: 10px 0'>\n          <span style=\"flex:1\">编制单位：").concat(this.financeCurrentAccount.companyName,'</span>\n          <span style="flex:1; text-align:center">').concat(l,'</span>\n          <span style="flex:1; text-align:right">\n          ').concat(this.displayTime||this.$moment(this.financeCurrentAccount.startTime,"YYYYMM").format("YYYY年第MM期"),"\n          </span>\n        </div>\n      </div>\n      ");this.$nextTick((function(){r()({printable:e,header:f||m,type:d,scanStyles:!1,style:"@page {size: auto;size:A3;margin:6mm}\n                  td,th{border:1px solid !important;padding: 10px 0;}\n                  table{border-collapse: collapse;font-size:20px;}\n                  .el-table__cell.gutter{border:none !important;}\n                  .el-table__empty-text{text-align: center;width: 100%;}\n                  tr{page-break-inside:avoid}\n                  .el-table__empty-text{display:none}\n                  .el-table__footer-wrapper{display:none}\n                  "+c,onLoadingEnd:function(){i.printFooterShow=!1}})}))}}}},bc95:function(e,t,i){"use strict";i("99af");t["a"]={methods:{getTimeShowVal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[0]||null,i=e[1]||null;if(!t)return"";var n=this.$moment(t).format("YYYY年第MM期");if(!i)return n;var a=this.$moment(i).format("YYYY年第MM期");return n===a?n:"".concat(n," 至 ").concat(a)},getTimeInputWidth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.$moment(e[0]||null),i=this.$moment(e[1]||null);return t.isValid()&&i.isValid()&&t.format("YYYY-MM")!==i.format("YYYY-MM")?"230px":"180px"}}}},cd42:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));i("d3b7"),i("25f0"),i("a9e3"),i("ac1f"),i("5319");function n(e,t){var i=0,n=0;try{i=(e.toString().split(".")[1]||[]).length}catch(o){return e+t}try{n=(t.toString().split(".")[1]||[]).length}catch(o){return e+t}var r=Math.pow(10,Math.max(i,n));return Math.round(a(e,r)+a(t,r))/r}function a(e,t){var i=0,n=e.toString(),a=t.toString();try{i+=(n.split(".")[1]||[]).length}catch(r){return e*t}try{i+=(a.split(".")[1]||[]).length}catch(r){return e*t}return Number(n.replace(".",""))*Number(a.replace(".",""))/Math.pow(10,i)}},d7ae:function(e,t,i){"use strict";i("6194")},def5:function(e,t,i){},eee7:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",e._g(e._b({staticClass:"print-set-dialog",attrs:{title:"凭证打印",width:"500px","close-on-click-modal":!1},on:{close:e.closeHandle}},"el-dialog",e.$attrs,!1),e.$listeners),[i("el-form",{ref:"form",attrs:{"label-position":"top",model:e.form,rules:e.rules,"label-width":"80px",inline:!1,size:"normal"}},[i("el-form-item",{attrs:{label:"打印类型"}},[i("el-radio-group",{model:{value:e.form.printType,callback:function(t){e.$set(e.form,"printType",t)},expression:"form.printType"}},[i("el-radio",{attrs:{label:"A4"}},[e._v("\n          A4\n        ")]),e._v(" "),i("el-radio",{attrs:{label:"B5"}},[e._v("\n          B5\n        ")]),e._v(" "),i("el-radio",{attrs:{label:"custom"}},[e._v("\n          自定义纸张\n        ")])],1),e._v(" "),"custom"==e.form.printType?i("div",{staticClass:"set-item-wrap"},[i("div",{staticClass:"set-item"},[i("span",[e._v("宽度")]),e._v(" "),i("el-input",{attrs:{oninput:"value=value.replace(/[^0-9.]/g,'')",min:1,type:"number"},model:{value:e.form.width,callback:function(t){e.$set(e.form,"width",t)},expression:"form.width"}}),e._v(" "),i("span",[e._v("毫米")])],1),e._v(" "),i("div",{staticClass:"set-item"},[i("span",[e._v("长度")]),e._v(" "),i("el-input",{attrs:{type:"number",oninput:"value=value.replace(/[^0-9.]/g,'')",min:1},model:{value:e.form.height,callback:function(t){e.$set(e.form,"height",t)},expression:"form.height"}}),e._v(" "),i("span",[e._v("毫米")])],1)]):e._e()],1),e._v(" "),i("el-form-item",{attrs:{label:"图像方向"}},[i("el-radio-group",{model:{value:e.form.orientation,callback:function(t){e.$set(e.form,"orientation",t)},expression:"form.orientation"}},[i("el-radio",{attrs:{label:"Landscape"}},[e._v("\n          纵向\n        ")]),e._v(" "),i("el-radio",{attrs:{label:"Portrait"}},[e._v("\n          横向\n        ")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"边框调整"}},[i("div",{staticClass:"border-set"},[i("div",{staticClass:"set-item"},[i("span",[e._v("左")]),e._v(" "),i("el-input",{attrs:{oninput:"value=value.replace(/[^0-9.]/g,'')",min:1,type:"number"},model:{value:e.form.left,callback:function(t){e.$set(e.form,"left",t)},expression:"form.left"}}),e._v(" "),i("span",[e._v("毫米")])],1),e._v(" "),i("div",{staticClass:"set-item"},[i("span",[e._v("上")]),e._v(" "),i("el-input",{attrs:{oninput:"value=value.replace(/[^0-9.]/g,'')",min:1,type:"number"},model:{value:e.form.top,callback:function(t){e.$set(e.form,"top",t)},expression:"form.top"}}),e._v(" "),i("span",[e._v("毫米")])],1)])]),e._v(" "),i("el-form-item",{attrs:{label:"字体大小"}},[i("div",{staticClass:"set-item"},[i("el-input",{attrs:{oninput:"value=value.replace(/[^0-9.]/g,'')",min:12,type:"number"},model:{value:e.form.fontSize,callback:function(t){e.$set(e.form,"fontSize",t)},expression:"form.fontSize"}}),e._v(" "),i("span",[e._v("像素")])],1)])],1),e._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("保存并打印")]),e._v(" "),i("el-button",{on:{click:e.closeHandle}},[e._v("取消")])],1)],1)},a=[],r=i("2a1a"),o="FM_PRINT_PAGE_SET",c={data:function(){return{form:{printType:"B5",orientation:"Portrait",top:0,left:0,width:0,height:0,fontSize:16},rules:{}}},created:function(){this.getData()},methods:{getData:function(){var e=this;Object(r["a"])({customKey:o}).then((function(t){t.data&&t.data.length&&(e.form=t.data[0])}))},getStyleData:function(){var e=this.getPageSize(this.form.printType),t=e.height,i=e.width;return{height:t,width:i,top:this.form.top,left:this.form.left,orientation:this.form.orientation,fontSize:this.form.fontSize+"px"}},getPageSize:function(e){return"A4"==e?{width:297,height:210}:"B5"==e?{width:250,height:176}:{width:this.form.width,height:this.form.height}},submit:function(){Object(r["b"])({customKey:o,data:[this.form]});var e=this.getStyleData();this.$emit("confirm",e)},closeHandle:function(){this.$emit("update:visible",!1)}}},s=c,l=(i("34b8"),i("2877")),u=Object(l["a"])(s,n,a,!1,null,"71d4df23",null);t["a"]=u.exports},f0d7:function(e,t,i){"use strict";i("88db")},f4fd:function(e,t){e.exports={ch:"零壹贰叁肆伍陆柒捌玖",ch_u:"个拾佰仟万亿",ch_f:"负",ch_d:"点",m_t:"人民币",m_z:"整",m_u:"元角分"}},f85c:function(e,t,i){"use strict";i("61ec")},fd75:function(e,t,i){}}]);