(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d3a3666"],{"03a3":function(e,t,n){},1603:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-popover",{attrs:{placement:"bottom-start","popper-class":"no-padding-popover",width:"400"},on:{show:e.handleShowPopover,hide:e.handleClosePopover},model:{value:e.popoverVisible,callback:function(t){e.popoverVisible=t},expression:"popoverVisible"}},[n("el-input",{class:["scene-select",{"is-show":e.popoverVisible}],staticStyle:{"margin-left":"10px"},style:{width:e.timeInputWidth},attrs:{slot:"reference",readonly:!0,value:e.searchTime},slot:"reference"},[n("i",{class:["el-input__icon","el-icon-"+e.iconClass],attrs:{slot:"suffix"},slot:"suffix"})]),e._v(" "),n("div",{staticClass:"form"},[e._t("default")],2)],1)},i=[],o=(n("d3b7"),n("159b"),n("b64b"),{name:"SearchPopoverWrapper",data:function(){return{popoverVisible:!1,searchTime:"",timeInputWidth:"180px"}},computed:{iconClass:function(){return this.popoverVisible?"arrow-up":"arrow-down"}},watch:{searchTime:function(e){this.$emit("update:searchTime",e)}},methods:{handleShowPopover:function(){this.popoverVisible||(this.popoverVisible=!0,window.addEventListener("click",this.handleCloseOutsidePopover))},handleClosePopover:function(){this.popoverVisible&&(this.popoverVisible=!1,window.removeEventListener("click",this.handleCloseOutsidePopover))},handleCloseOutsidePopover:function(e){var t=this.$refs.popover.$el;t.contains(e.target)||this.handleClosePopover()},updateData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(t).forEach((function(n){e[n]=t[n]}))}}}),r=o,c=(n("f0d7"),n("2877")),s=Object(c["a"])(r,a,i,!1,null,"432bfe70",null);t["a"]=s.exports},"1c5c":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"main"},[n("flexbox",{staticClass:"main-header",attrs:{justify:"space-between"}},[n("span",{staticClass:"main-title"},[e._v("\n        余额表\n        "),n("i",{staticClass:"wk wk-icon-fill-help wk-help-tips",attrs:{"data-type":"39","data-id":"312"}})]),e._v(" "),n("div",{staticClass:"buttons"},[n("el-dropdown",{staticClass:"receive-drop",attrs:{trigger:"click"}},[n("el-button",{staticClass:"dropdown-btn",attrs:{icon:"el-icon-more"}}),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.$auth("finance.accountBalance.export")?n("el-dropdown-item",{nativeOn:{click:function(t){return e.print(t)}}},[e._v("打印")]):e._e(),e._v(" "),e.$auth("finance.accountBalance.export")?n("el-dropdown-item",{nativeOn:{click:function(t){return e.exportTab(t)}}},[e._v("导出")]):e._e()],1)],1)],1)]),e._v(" "),n("flexbox",{staticClass:"content-flex",attrs:{justify:"space-between"}},[n("flexbox",{staticClass:"search"},[n("div",[n("flexbox",[n("search-popover-wrapper",{attrs:{"search-time":e.searchTime},on:{"update:searchTime":function(t){e.searchTime=t}}},[n("balance-search",{attrs:{"default-value":e.searchForm},on:{change:e.handleToSearch}})],1),e._v(" "),n("el-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"subtle",icon:"el-icon-refresh-right"},on:{click:e.getDate}})],1)],1),e._v(" "),n("div",{staticClass:"checkbox-item"},[n("el-checkbox",{on:{change:e.openBtn},model:{value:e.expandAll,callback:function(t){e.expandAll=t},expression:"expandAll"}},[e._v("展开所有级次")])],1)])],1),e._v(" "),n("div",{staticClass:"table-wrapper"},[e.balanceSheetTable?n("el-table",{ref:"balanceSheetTable",staticStyle:{width:"100%"},attrs:{id:"balanceSheet","header-cell-style":{"text-align":"center"},"default-expand-all":e.expandAll,data:e.balabceData,height:e.tableHeight,"tree-props":{children:"subjects"},"cell-class-name":e.cellClassName,"row-key":"id",border:"",stripe:""},on:{"row-click":e.handleRowClick}},e._l(e.fieldList,(function(t,a){return n("el-table-column",{key:a,attrs:{formatter:e.fieldFormatter,label:t.label,prop:t.prop,"show-overflow-tooltip":""}},e._l(t.columns,(function(t,i){return n("el-table-column",{key:a+"_"+i,attrs:{formatter:e.fieldFormatterMoney,prop:String(t.prop),label:t.label,align:"right","show-overflow-tooltip":""}})})))}))):e._e()],1)],1)])},i=[],o=n("53ca"),r=n("5530"),c=(n("d3b7"),n("159b"),n("d81d"),n("14d9"),n("a15b"),n("f93d")),s=n("ed08"),l=n("8c73"),u=n("1603"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[n("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,"label-width":"70px","label-position":"top"}},[n("el-form-item",{attrs:{label:"会计期间"}},[n("choose-accountant-time",{model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"起始科目"}},[n("subject-select-options",{model:{value:e.form.startSubjectId,callback:function(t){e.$set(e.form,"startSubjectId",t)},expression:"form.startSubjectId"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"结束科目"}},[n("subject-select-options",{model:{value:e.form.endSubjectId,callback:function(t){e.$set(e.form,"endSubjectId",t)},expression:"form.endSubjectId"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"科目级次"}},[n("flexbox",[n("el-input-number",{attrs:{min:1,controls:!1},model:{value:e.form.minLevel,callback:function(t){e.$set(e.form,"minLevel",t)},expression:"form.minLevel"}}),e._v(" "),n("span",{staticStyle:{padding:"0 10px"}},[e._v("\n          至\n        ")]),e._v(" "),n("el-input-number",{attrs:{min:1,controls:!1},model:{value:e.form.maxLevel,callback:function(t){e.$set(e.form,"maxLevel",t)},expression:"form.maxLevel"}})],1)],1),e._v(" "),n("flexbox",{staticClass:"footer",attrs:{justify:"flex-end"}},[n("el-button",{on:{click:e.emitClose}},[e._v("关闭")]),e._v(" "),n("el-button",{on:{click:e.resetForm}},[e._v("重置")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.emitChange}},[e._v("查询")])],1)],1)],1)},d=[],m=(n("b64b"),n("dc95")),f=n("cb41"),h=n("aa42"),b=n("bc95"),v=n("2f62"),j={name:"BalanceSearch",components:{ChooseAccountantTime:m["a"],SubjectSelectOptions:f["a"]},mixins:[h["a"],b["a"]],props:{defaultValue:{type:Object,default:function(){}}},data:function(){return{loading:!1,voucherOptions:[],form:{startTime:"",endTime:""}}},computed:Object(r["a"])({},Object(v["c"])(["financeCurrentAccount"])),watch:{defaultValue:{handler:function(e){this.form.startTime=e.startTime,this.form.endTime=e.endTime},deep:!0,immediate:!0}},mounted:function(){this.financeCurrentAccount&&this.financeCurrentAccount.startTime&&this.resetForm()},methods:{resetForm:function(){this.form={startTime:"",endTime:"",startSubjectId:"",endSubjectId:"",minLevel:1,maxLevel:9,isShowAssist:!1,isShowMoney:!1,isShowUnchange:!1,isShowAll:!1,time:[this.financeCurrentAccount.startTime,this.financeCurrentAccount.startTime]},this.emitChange()},emitClose:function(){var e=this.getParentNode("SearchPopoverWrapper");e&&e.updateData&&e.updateData({searchTime:this.getTimeShowVal(this.form.time),timeInputWidth:this.getTimeInputWidth(this.form.time),popoverVisible:!1})},emitChange:function(){var e=Object(r["a"])(Object(r["a"])({},this.form),{},{startTime:this.$moment(this.form.time[0]).format("YYYYMM"),endTime:this.$moment(this.form.time[1]).format("YYYYMM")});Object.keys(e).forEach((function(t){e[t]||0===e[t]||(e[t]="")})),this.$emit("change",e),this.emitClose()}}},y=j,T=(n("caca"),n("2877")),x=Object(T["a"])(y,p,d,!1,null,"ddb279f6",null),C=x.exports,g=n("b699"),w={name:"BalanceSheet",components:{SearchPopoverWrapper:u["a"],BalanceSearch:C},mixins:[g["a"]],props:{},data:function(){return{expandAll:!1,balanceSheetTable:!0,loading:!1,tableHeight:document.documentElement.clientHeight-240,balabceData:[],fieldList:[{label:"科目编码",prop:"number"},{label:"科目名称",prop:"subjectName"},{label:"期初余额",columns:[{label:"借方",prop:"debtorInitialBalance"},{label:"贷方",prop:"creditInitialBalance"}]},{label:"本期发生额",columns:[{label:"借方",prop:"debtorCurrentBalance"},{label:"贷方",prop:"creditCurrentBalance"}]},{label:"本年累计发生额",columns:[{label:"借方",prop:"debtorYearBalance"},{label:"贷方",prop:"creditYearBalance"}]},{label:"期末余额",columns:[{label:"借方",prop:"debtorEndBalance"},{label:"贷方",prop:"creditEndBalance"}]}],searchForm:{},timeArray:[]}},computed:Object(r["a"])(Object(r["a"])({},Object(v["c"])(["financeCurrentAccount"])),{},{iconClass:function(){return this.showScene?"arrow-up":"arrow-down"}}),created:function(){var e=this;window.onresize=function(){e.tableHeight=document.documentElement.clientHeight-240}},methods:{print:function(){var e=this;this.expandAll=!0,this.openBtn(),this.$nextTick((function(){e.HandlerPrint("balanceSheet",{title:"科目余额表",style:"\n        td:first-child>div:{width:100%;}\n        .cell.el-tooltip{word-break:break-all;}\n        "})}))},handleToSearch:function(e){this.timeArray=e.time,delete e.time,this.searchForm=e,this.getDate()},setNUmber:function(e){var t=this;e.forEach((function(e){e.id=Math.ceil(1e7*Math.random()),e.hasOwnProperty("subjects")&&"object"!==Object(o["a"])(e.subjects)&&e.subjects.length>0&&(e.subjects=JSON.parse(e.subjects)),e.hasOwnProperty("subjects")&&e.subjects.length>0&&(e.subjects=e.subjects.map((function(e,t){return e.id=Math.ceil(1e7*Math.random()),e})),t.setNUmber(e.subjects))}))},getDate:function(){var e=this;this.loading=!0,Object(c["n"])(this.searchForm).then((function(t){e.setNUmber(t.data),e.balabceData=t.data,e.loading=!1})).catch((function(t){e.loading=!1}))},lookDetail:function(e){this.$router.push({path:"/fm/ledger/subs/detailedLedger",query:{timeArray:[this.$moment(this.timeArray[0]).format("YYYY-MM"),this.$moment(this.timeArray[1]).format("YYYY-MM")],_subjectId:e.subjectId}})},exportTab:function(){Object(c["d"])(Object(r["a"])(Object(r["a"])({},this.searchForm),{},{isLaunch:this.expandAll?1:0})).then((function(e){Object(s["b"])(e)}))},openBtn:function(){var e=this;this.balanceSheetTable=!1,this.$nextTick((function(){e.balanceSheetTable=!0}))},handleRowClick:function(e,t,n){"number"===t.property&&this.lookDetail(e)},fieldFormatter:function(e,t){if("number"==t.property){var n=e.number;if(e.adjuvantList&&e.adjuvantList.length>0){var a=[];e.adjuvantList.forEach((function(e){a.push(e.carteNumber)}));var i=a.join("_");n=n+"_"+i}return n}if("subjectName"==t.property){var o=e.subjectName;if(e.adjuvantList&&e.adjuvantList.length>0){var r=[];e.adjuvantList.forEach((function(e){r.push(e.carteName)}));var c=r.join("_");o=o+"_"+c}return o}return e[t.property]},fieldFormatterMoney:function(e,t){return e[t.property]?Object(l["h"])(e[t.property]):""},cellClassName:function(e){var t=e.row,n=e.column;e.rowIndex,e.columnIndex;if("number"===n.property)return t.subjects&&0!=t.subjects.length?"can-visit--underline":"can-visit--underline no-children no-father"}}},O=w,Y=(n("d7d1c"),Object(T["a"])(O,a,i,!1,null,"5788395f",null));t["default"]=Y.exports},"256a":function(e,t,n){"use strict";n("62f4")},"38cf":function(e,t,n){var a=n("23e7"),i=n("1148");a({target:"String",proto:!0},{repeat:i})},"62f4":function(e,t,n){},"88db":function(e,t,n){},aa42:function(e,t,n){"use strict";n("b0c0");t["a"]={methods:{getParentNode:function(e){var t=this.$parent||this.$root,n=t.$options.name;while(t&&(!n||n!==e))t=t.$parent,t&&(n=t.$options.name);return t}}}},b699:function(e,t,n){"use strict";var a=n("5530"),i=(n("99af"),n("add5")),o=n.n(i),r=n("2f62"),c=n("bc95");t["a"]={data:function(){return{printFooterShow:!1,pageTitle:"",searchTime:""}},mixins:[c["a"]],computed:Object(a["a"])(Object(a["a"])({},Object(r["c"])(["financeCurrentAccount"])),{},{displayTime:function(){return this.searchTime||this.dataTime&&this.$moment(this.dataTime,"YYYYMM").format("YYYY年第MM期")||this.dateValue&&this.$moment(this.dateValue,"YYYYMM").format("YYYY年第MM期")||this.timeArray&&this.timeArray.length&&this.getTimeShowVal(this.timeArray)}}),methods:{HandlerPrint:function(e,t){var n=this,a=t.title,i=void 0===a?"":a,r=t.style,c=void 0===r?"":r,s=t.centerText,l=void 0===s?"":s,u=t.headerHtml,p=void 0===u?"":u,d=t.type,m=void 0===d?"html":d;this.printFooterShow=!0;var f="\n      <div >\n        <div style='text-align:center;font-size:30px; font-weight:bold'>".concat(this.pageTitle||i,"</div>\n        <div style='display:flex; font-size:26px;padding: 10px 0'>\n          <span style=\"flex:1\">编制单位：").concat(this.financeCurrentAccount.companyName,'</span>\n          <span style="flex:1; text-align:center">').concat(l,'</span>\n          <span style="flex:1; text-align:right">\n          ').concat(this.displayTime||this.$moment(this.financeCurrentAccount.startTime,"YYYYMM").format("YYYY年第MM期"),"\n          </span>\n        </div>\n      </div>\n      ");this.$nextTick((function(){o()({printable:e,header:p||f,type:m,scanStyles:!1,style:"@page {size: auto;size:A3;margin:6mm}\n                  td,th{border:1px solid !important;padding: 10px 0;}\n                  table{border-collapse: collapse;font-size:20px;}\n                  .el-table__cell.gutter{border:none !important;}\n                  .el-table__empty-text{text-align: center;width: 100%;}\n                  tr{page-break-inside:avoid}\n                  .el-table__empty-text{display:none}\n                  .el-table__footer-wrapper{display:none}\n                  "+c,onLoadingEnd:function(){n.printFooterShow=!1}})}))}}}},bc95:function(e,t,n){"use strict";n("99af");t["a"]={methods:{getTimeShowVal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[0]||null,n=e[1]||null;if(!t)return"";var a=this.$moment(t).format("YYYY年第MM期");if(!n)return a;var i=this.$moment(n).format("YYYY年第MM期");return a===i?a:"".concat(a," 至 ").concat(i)},getTimeInputWidth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.$moment(e[0]||null),n=this.$moment(e[1]||null);return t.isValid()&&n.isValid()&&t.format("YYYY-MM")!==n.format("YYYY-MM")?"230px":"180px"}}}},bef8:function(e,t,n){},caca:function(e,t,n){"use strict";n("03a3")},d7d1c:function(e,t,n){"use strict";n("bef8")},dc95:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-date-picker",{attrs:{"picker-options":e.pickerOptions,clearable:e.clearable,type:"monthrange","range-separator":"至","start-placeholder":"开始月份","value-format":"yyyy-MM-dd HH:mm:ss","end-placeholder":"结束月份"},on:{change:e.changeMonth},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})},i=[],o=n("2909"),r=n("5530"),c=n("2f62"),s={name:"ChooseAccountantTime",components:{},props:{value:{type:[Array],default:function(){return[]}},clearable:{type:Boolean,default:!0}},data:function(){return{time:[]}},computed:Object(r["a"])(Object(r["a"])({},Object(c["c"])(["financeFilterTimeRange"])),{},{pickerOptions:function(){var e=this;return{disabledDate:function(t){var n=new Date(t).getMonth(),a=new Date(t).getMonth(e.financeFilterTimeRange.minTime.val),i=new Date(t).getMonth(e.financeFilterTimeRange.maxTime.val);return n<a||n>i}}}}),watch:{value:{handler:function(e){this.time=Object(o["a"])(e)},deep:!0,immediate:!0}},mounted:function(){},methods:{changeMonth:function(e){this.$emit("input",e),this.$emit("change",e)}}},l=s,u=(n("256a"),n("2877")),p=Object(u["a"])(l,a,i,!1,null,"7df1c876",null);t["a"]=p.exports},f0d7:function(e,t,n){"use strict";n("88db")},f93d:function(e,t,n){"use strict";n.d(t,"o",(function(){return i})),n.d(t,"m",(function(){return o})),n.d(t,"p",(function(){return r})),n.d(t,"n",(function(){return c})),n.d(t,"s",(function(){return s})),n.d(t,"r",(function(){return l})),n.d(t,"q",(function(){return u})),n.d(t,"k",(function(){return p})),n.d(t,"l",(function(){return d})),n.d(t,"c",(function(){return m})),n.d(t,"e",(function(){return f})),n.d(t,"d",(function(){return h})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return v})),n.d(t,"h",(function(){return j})),n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return T})),n.d(t,"i",(function(){return x})),n.d(t,"j",(function(){return C}));var a=n("b775");function i(e){return Object(a["a"])({url:"financeCertificate/queryDetailUpAccount",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(a["a"])({url:"financeCertificate/queryDetailAccount",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function r(e){return Object(a["a"])({url:"financeCertificate/queryDiversification",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(a["a"])({url:"financeCertificate/queryDetailBalanceAccount",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function s(e){return Object(a["a"])({url:"financeCertificate/queryLabelName",method:"post",data:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function l(e){return Object(a["a"])({url:"financeCertificate/queryItemsDetailBalanceAccount",method:"post",data:e,headers:{"Content-Type":"application/json"}})}function u(e){return Object(a["a"])({url:"financeCertificate/queryItemsDetailAccount",method:"post",data:e,headers:{"Content-Type":"application/json"}})}function p(e){return Object(a["a"])({url:"financeCertificate/queryAmountDetailAccount",method:"post",data:e,headers:{"Content-Type":"application/json"}})}function d(e){return Object(a["a"])({url:"financeCertificate/queryAmountDetailUpAccount",method:"post",data:e,headers:{"Content-Type":"application/json"}})}function m(e){return Object(a["a"])({url:"financeCertificate/exportDetailAccount",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"},responseType:"blob"})}function f(e){return Object(a["a"])({url:"financeCertificate/exportDetailUpAccount",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"},responseType:"blob"})}function h(e){return Object(a["a"])({url:"financeCertificate/exportDetailBalanceAccount",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"},responseType:"blob"})}function b(e){return Object(a["a"])({url:"financeCertificate/exportDiversification",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"},responseType:"blob"})}function v(e){return Object(a["a"])({url:"financeCertificate/exportItemsDetailAccount",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"},responseType:"blob"})}function j(e){return Object(a["a"])({url:"financeCertificate/exportItemsDetailBalanceAccount",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"},responseType:"blob"})}function y(e){return Object(a["a"])({url:"financeCertificate/exportAmountDetailAccount",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"},responseType:"blob"})}function T(e){return Object(a["a"])({url:"financeCertificate/exportAmountDetailUpAccount",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"},responseType:"blob"})}function x(e){return Object(a["a"])({url:"/financeCertificate/itemsDetailTree",method:"post",data:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function C(e){return Object(a["a"])({url:"financeCertificate/queryLabelNameByData",method:"post",data:e,headers:{"Content-Type":"application/json"}})}}}]);